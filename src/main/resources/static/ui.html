<!DOCTYPE html>
<html>
<head>
    <title>Planets and Wormholes</title>
    <style>
        .planet {
            position: absolute;
            border-radius: 50%;
            transition: transform 0.2s;
        }

        .planet-popup {
            position: absolute;
            background-color: white;
            border: 1px solid black;
            padding: 10px;
            display: none;
        }

        .planet:hover .planet-popup {
            display: block;
            z-index: 1;
        }

        .wormhole {
            position: absolute;
            background-color: black;
            height: 10px;
            width: 10px;
            transition: transform 0.2s;
            z-index: 0;
        }

        .wormhole:hover {
            transform: scale(1.2);
            z-index: 1;
        }

        .wormhole-popup {
            position: absolute;
            background-color: white;
            border: 1px solid black;
            padding: 10px;
            display: none;
        }

        .wormhole:hover + .wormhole-popup {
            display: block;
        }
    </style>
</head>
<body>

<div id="container"></div>

<script type="text/javascript">

    // Create a new WebSocket connection to the server
    const socket = new WebSocket('ws://localhost:8080/planets');

    // When the WebSocket connection is open, send a message to request the JSON data
    socket.addEventListener('open', () => {
        socket.send('getJson');
    });

    // When a message is received from the server, parse the JSON and create the planets and wormholes
    socket.addEventListener('message', event => {
        const data = JSON.parse(event.data);
        console.log(data);
        // Create the planets and wormholes using the data object
    });
    // Define the JSON configuration
    const jsonConfig = {
        width: 800,
        height: 600,
        planets: [
            {
                name: 'Planet 1',
                x: 100,
                y: 100,
                radius: 25,
                color: '#ff0000',
                info: 'This is planet 1'
            },
            {
                name: 'Planet 2',
                x: 400,
                y: 300,
                radius: 25,
                color: '#00ff00',
                info: 'This is planet 2'
            }
        ],
        wormholes: [
            {
                name: 'Wormhole 1',
                x1: 200,
                y1: 200,
                x2: 500,
                y2: 400,
                color: '#000000',
                info: 'This is wormhole 1'
            }
        ]
    };

    // Create the planets
    jsonConfig.planets.forEach((planet) => {
        const planetDiv = document.createElement('div');
        planetDiv.className = 'planet';
        planetDiv.style.width = planet.radius * 2 + 'px';
        planetDiv.style.height = planet.radius * 2 + 'px';
        planetDiv.style.backgroundColor = planet.color;
        planetDiv.style.left = planet.x - planet.radius + 'px';
        planetDiv.style.top = planet.y - planet.radius + 'px';

        const planetPopup = document.createElement('div');
        planetPopup.className = 'planet-popup';
        planetPopup.innerHTML = '<strong>' + planet.name + '</strong><br>' + planet.info;

        planetDiv.appendChild(planetPopup);
        document.getElementById('container').appendChild(planetDiv);
    });

    // Create the wormholes
    jsonConfig.wormholes.forEach((wormhole) => {

        const dx = wormhole.x2 - wormhole.x1;
        const dy = wormhole.y2 - wormhole.y1;
        const angle = Math.atan2(dy, dx) * 180 / Math.PI;
        const length = Math.sqrt(dx * dx + dy * dy);

        const wormholeDiv = document.createElement('div');
        wormholeDiv.className = 'wormhole';
        wormholeDiv.style.width = length + 'px';
        wormholeDiv.style.left = wormhole.x1 + 'px';
        wormholeDiv.style.top = wormhole.y1 - 5 + 'px';
        wormholeDiv.style.transform = 'rotate(' + angle + 'deg)';
        wormholeDiv.style.backgroundColor = wormhole.color;

        const wormholePopup = document.createElement('div');
        wormholePopup.className = 'wormhole-popup';
        wormholePopup.innerHTML = '<strong>' + wormhole.name + '</strong><br>' + wormhole.info;

        wormholeDiv.appendChild(wormholePopup);
        document.getElementById('container').appendChild(wormholeDiv);
    });
</script>
</body>
</html>

