<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Game Control Panel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 16px;
            margin: 20px;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-right: 20px;
            margin-bottom: 10px;
            cursor: pointer;
            min-width: 240px;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            margin-right: 20px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<h1>Game Control Panel</h1>

<div>
    <button type="button" onclick="getGameKey()">Get Game Key</button>
    <input type="text" id="txbGameKey" readonly>
</div>

<div>
    <button type="button" onclick="createGame()">Create Game</button>
    <input type="text" id="txbGameId" readonly>
</div>

<div>
    <button type="button" onclick="connectWebSocket()">Connect Control WebSocket</button>
</div>

<div>
    <button type="button" onclick="startGame()">Start Game</button>
    <button type="button" onclick="stopGame()">Stop Game</button>
</div>


<script type="text/javascript">
    const UrlRoot = 'http://localhost:8080';
    let currentGameKey = '';
    let currentGameId = '';
  
    const getGameKey = async () => {
    	const response = await fetch(`${UrlRoot}/getGameKey`);

    	currentGameKey = (await response.json()).key;
    	
    	const txbGameKey = document.getElementById('txbGameKey');
    	txbGameKey.value = currentGameKey;
 	};
  
 	const createGame = async () => {
 	    const gameConfig = {
	   		bots: [1],
	   		gameType: 'SINGLE_PLAYER'
 	    };
 	    
 	    const response = await fetch(`${UrlRoot}/createGame/${encodeURIComponent(currentGameKey)}`, {
 	    	method: 'POST',
 	    	headers: {
 	    	   'Content-Type': 'application/json',
    	    },
 	    	body: JSON.stringify(gameConfig)
 	    });
 	    
 	    const gameCreatedResult = await response.json();
 	    
 	    console.log(gameCreatedResult);
 	    currentGameId = gameCreatedResult.gameId;
 	    
 	   const txbGameId = document.getElementById('txbGameId');
       txbGameId.value = currentGameId;
    };
  
    const connectWebSocket = async () => {
    	const response = await fetch(`${UrlRoot}/connect/${currentGameId}/${currentGameKey}`);
    };
  
    const startGame = async () => {
    	const response = await fetch(`${UrlRoot}/startGame/${currentGameId}/${currentGameKey}`);
    	
    	console.log(await response.json());
    };
  
    const stopGame = async () => {
    	const response = await fetch(`${UrlRoot}/stopGame/${currentGameId}/${currentGameKey}`);
    	
    	console.log(await response.json());
    };
  
</script>
</body>
</html>